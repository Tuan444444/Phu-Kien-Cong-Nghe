@model List<PhuKienCongNghe.Models.Donhang>

@{
    ViewData["Title"] = "Dashboard";
    Layout = "_AdminLayout"; // <-- QUAN TRỌNG: Báo cho file này dùng "Khung" Admin
}

<h1 class="mb-4">Dashboard</h1>

<div class="row">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-success shadow-sm h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs fw-bold text-success text-uppercase mb-1">Doanh thu (30 ngày)</div>
                        <div class="h5 mb-0 fw-bold text-gray-800">@ViewBag.TotalRevenue.ToString("N0") đ</div>
                    </div>
                    <div class="col-auto">
                        <i class="bi bi-cash-stack fs-2 text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-primary shadow-sm h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs fw-bold text-primary text-uppercase mb-1">Đơn hàng mới</div>
                        <div class="h5 mb-0 fw-bold text-gray-800">@ViewBag.NewOrders</div>
                    </div>
                    <div class="col-auto">
                        <i class="bi bi-receipt fs-2 text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-info shadow-sm h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs fw-bold text-info text-uppercase mb-1">Khách hàng</div>
                        <div class="h5 mb-0 fw-bold text-gray-800">@ViewBag.TotalUsers</div>
                    </div>
                    <div class="col-auto">
                        <i class="bi bi-people fs-2 text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-warning shadow-sm h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs fw-bold text-warning text-uppercase mb-1">Hàng sắp hết</div>
                        <div class="h5 mb-0 fw-bold text-gray-800">@ViewBag.LowStock</div>
                    </div>
                    <div class="col-auto">
                        <i class="bi bi-exclamation-triangle fs-2 text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card shadow-sm">
            <div class="card-header">
                <h5 class="mb-0">Đơn hàng cần xử lý</h5>
            </div>
            <div class="card-body">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Mã Đơn</th>
                            <th>Tên Khách Hàng</th>
                            <th>Ngày Đặt</th>
                            <th>Tổng Tiền</th>
                            <th>Chi Tiết</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var donhang in Model)
                        {
                            <tr>
                                <td>#@donhang.MaDonHang</td>
                                <td>@donhang.HoTenNguoiNhan</td>
                                <td>@(((DateTime)donhang.NgayDat).ToString("dd/MM/yyyy"))</td>
                                <td>@donhang.TongTien.ToString("N0") đ</td>
                                <td>
                                    <a href="#" class="btn btn-sm btn-outline-primary">Xem</a>
                                </td>
                            </tr>
                        }
                        @if (!Model.Any())
                        {
                            <tr>
                                <td colspan="5" class="text-center text-muted">Không có đơn hàng mới nào.</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>